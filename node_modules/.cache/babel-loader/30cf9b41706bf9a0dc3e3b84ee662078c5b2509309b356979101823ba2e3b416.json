{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\my-app\\\\src\\\\components\\\\pages\\\\SinglePage.js\",\n  _s = $RefreshSig$();\nimport { useParams } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport useMarvelService from '../../services/MarvelService';\nimport Spinner from '../spinner/Spinner,';\nimport ErrorMessage from '../errorMessage/ErrorMessage';\nimport AppBanner from \"../appBanner/AppBanner\";\n\n// Хотелось бы вынести функцию по загрузке данных как отдельный аргумент\n// Но тогда мы потеряем связь со стэйтами загрузки и ошибки\n// А если вынесем их все в App.js - то они будут одни на все страницы\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SinglePage = _ref => {\n  _s();\n  let {\n    Component,\n    dataType\n  } = _ref;\n  const {\n    id\n  } = useParams();\n  const [data, setData] = useState(null);\n  const {\n    loading,\n    error,\n    getComic,\n    getCharacter,\n    clearError\n  } = useMarvelService();\n  useEffect(() => {\n    updateData();\n  }, [id]);\n  const updateData = () => {\n    clearError();\n    switch (dataType) {\n      case 'comics':\n        getComic(id).then(onDataLoaded);\n        break;\n      case 'character':\n        getCharacter(id).then(onDataLoaded);\n    }\n  };\n  const onDataLoaded = data => {\n    setData(data);\n  };\n  const errorMessage = error ? /*#__PURE__*/_jsxDEV(ErrorMessage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 38\n  }, this) : null;\n  const spinner = loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 35\n  }, this) : null;\n  const content = !(loading || error || !data) ? /*#__PURE__*/_jsxDEV(Component, {\n    data: data\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 56\n  }, this) : null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AppBanner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }, this), errorMessage, spinner, content]\n  }, void 0, true);\n};\n_s(SinglePage, \"DyrnpQIHeZPpSasAkmXGZJniufQ=\", false, function () {\n  return [useParams, useMarvelService];\n});\n_c = SinglePage;\nexport default SinglePage;\nvar _c;\n$RefreshReg$(_c, \"SinglePage\");","map":{"version":3,"names":["useParams","useState","useEffect","useMarvelService","Spinner","ErrorMessage","AppBanner","SinglePage","Component","dataType","id","data","setData","loading","error","getComic","getCharacter","clearError","updateData","then","onDataLoaded","errorMessage","spinner","content"],"sources":["C:/Users/PC/my-app/src/components/pages/SinglePage.js"],"sourcesContent":["import { useParams } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport useMarvelService from '../../services/MarvelService';\r\nimport Spinner from '../spinner/Spinner,';\r\nimport ErrorMessage from '../errorMessage/ErrorMessage';\r\nimport AppBanner from \"../appBanner/AppBanner\";\r\n\r\n// Хотелось бы вынести функцию по загрузке данных как отдельный аргумент\r\n// Но тогда мы потеряем связь со стэйтами загрузки и ошибки\r\n// А если вынесем их все в App.js - то они будут одни на все страницы\r\n\r\nconst SinglePage = ({Component, dataType}) => {\r\n        const {id} = useParams();\r\n        const [data, setData] = useState(null);\r\n        const {loading, error, getComic, getCharacter, clearError} = useMarvelService();\r\n\r\n        useEffect(() => {\r\n            updateData()\r\n        }, [id])\r\n\r\n        const updateData = () => {\r\n            clearError();\r\n\r\n            switch (dataType) {\r\n                case 'comics':\r\n                    getComic(id).then(onDataLoaded);\r\n                    break;\r\n                case 'character':\r\n                    getCharacter(id).then(onDataLoaded);\r\n            }\r\n        }\r\n\r\n        const onDataLoaded = (data) => {\r\n            setData(data);\r\n        }\r\n\r\n        const errorMessage = error ? <ErrorMessage/> : null;\r\n        const spinner = loading ? <Spinner/> : null;\r\n        const content = !(loading || error || !data) ? <Component data={data}/> : null;\r\n\r\n        return (\r\n            <>\r\n                <AppBanner/>\r\n                {errorMessage}\r\n                {spinner}\r\n                {content}\r\n            </>\r\n        )\r\n}\r\n\r\nexport default SinglePage;"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,OAAOC,gBAAgB,MAAM,8BAA8B;AAC3D,OAAOC,OAAO,MAAM,qBAAqB;AACzC,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,SAAS,MAAM,wBAAwB;;AAE9C;AACA;AACA;AAAA;AAAA;AAEA,MAAMC,UAAU,GAAG,QAA2B;EAAA;EAAA,IAA1B;IAACC,SAAS;IAAEC;EAAQ,CAAC;EACjC,MAAM;IAACC;EAAE,CAAC,GAAGV,SAAS,EAAE;EACxB,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM;IAACY,OAAO;IAAEC,KAAK;IAAEC,QAAQ;IAAEC,YAAY;IAAEC;EAAU,CAAC,GAAGd,gBAAgB,EAAE;EAE/ED,SAAS,CAAC,MAAM;IACZgB,UAAU,EAAE;EAChB,CAAC,EAAE,CAACR,EAAE,CAAC,CAAC;EAER,MAAMQ,UAAU,GAAG,MAAM;IACrBD,UAAU,EAAE;IAEZ,QAAQR,QAAQ;MACZ,KAAK,QAAQ;QACTM,QAAQ,CAACL,EAAE,CAAC,CAACS,IAAI,CAACC,YAAY,CAAC;QAC/B;MACJ,KAAK,WAAW;QACZJ,YAAY,CAACN,EAAE,CAAC,CAACS,IAAI,CAACC,YAAY,CAAC;IAAC;EAEhD,CAAC;EAED,MAAMA,YAAY,GAAIT,IAAI,IAAK;IAC3BC,OAAO,CAACD,IAAI,CAAC;EACjB,CAAC;EAED,MAAMU,YAAY,GAAGP,KAAK,gBAAG,QAAC,YAAY;IAAA;IAAA;IAAA;EAAA,QAAE,GAAG,IAAI;EACnD,MAAMQ,OAAO,GAAGT,OAAO,gBAAG,QAAC,OAAO;IAAA;IAAA;IAAA;EAAA,QAAE,GAAG,IAAI;EAC3C,MAAMU,OAAO,GAAG,EAAEV,OAAO,IAAIC,KAAK,IAAI,CAACH,IAAI,CAAC,gBAAG,QAAC,SAAS;IAAC,IAAI,EAAEA;EAAK;IAAA;IAAA;IAAA;EAAA,QAAE,GAAG,IAAI;EAE9E,oBACI;IAAA,wBACI,QAAC,SAAS;MAAA;MAAA;MAAA;IAAA,QAAE,EACXU,YAAY,EACZC,OAAO,EACPC,OAAO;EAAA,gBACT;AAEf,CAAC;AAAA,GArCKhB,UAAU;EAAA,QACKP,SAAS,EAEuCG,gBAAgB;AAAA;AAAA,KAH/EI,UAAU;AAuChB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}