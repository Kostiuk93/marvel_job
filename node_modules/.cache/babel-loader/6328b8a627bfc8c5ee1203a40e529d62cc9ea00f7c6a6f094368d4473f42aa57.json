{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/PC/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/PC/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createClass from\"C:/Users/PC/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"C:/Users/PC/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";var MarvelService=/*#__PURE__*/_createClass(function MarvelService(){var _this=this;_classCallCheck(this,MarvelService);this._apiBase='https://gateway.marvel.com:443/v1/public/';this._apiKey='apikey=2a5a4367491be5b1b90e0fe3a2d81b01';this._baseOffset=210;this.getResourse=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:res=_context.sent;if(res.ok){_context.next=5;break;}throw new Error(\"Could not fetch \".concat(url,\", status:  \").concat(res.status));case 5:_context.next=7;return res.json();case 7:return _context.abrupt(\"return\",_context.sent);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();this.getAllCharacters=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var offset,res,_args2=arguments;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:offset=_args2.length>0&&_args2[0]!==undefined?_args2[0]:_this._baseOffset;_context2.next=3;return _this.getResourse(\"\".concat(_this._apiBase,\"characters?limit=9&offset=\").concat(offset,\"&\").concat(_this._apiKey));case 3:res=_context2.sent;return _context2.abrupt(\"return\",res.data.results.map(_this._transformCaracter));case 5:case\"end\":return _context2.stop();}}},_callee2);}));this.getCharacter=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.getResourse(\"\".concat(_this._apiBase,\"characters/\").concat(id,\"?\").concat(_this._apiKey));case 2:res=_context3.sent;return _context3.abrupt(\"return\",_this._transformCaracter(res.data.results[0]));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();this._transformCaracter=function(char){return{id:char.id,name:char.name,description:char.description?\"\".concat(char.description.slice(0,210),\"...\"):'There is no description for this character',thumbnail:char.thumbnail.path+'.'+char.thumbnail.extension,homepage:char.urls[0].url,wiki:char.urls[1].url,comics:char.comics.items};};});export default MarvelService;","map":{"version":3,"names":["MarvelService","_apiBase","_apiKey","_baseOffset","getResourse","url","fetch","res","ok","Error","status","json","getAllCharacters","offset","data","results","map","_transformCaracter","getCharacter","id","char","name","description","slice","thumbnail","path","extension","homepage","urls","wiki","comics","items"],"sources":["C:/Users/PC/my-app/src/services/MarvelService.js"],"sourcesContent":["class MarvelService {\r\n    //Alex\r\n    // _apiBase = 'https://gateway.marvel.com:443/v1/public/';\r\n    // _apiKey = 'apikey=f75e1499b218241b71745986222174a5';\r\n    \r\n    //Alex93\r\n    _apiBase = 'https://gateway.marvel.com:443/v1/public/';\r\n    _apiKey = 'apikey=2a5a4367491be5b1b90e0fe3a2d81b01';\r\n    _baseOffset = 210;\r\n\r\n\r\n    getResourse = async (url ) => {\r\n        let res = await fetch(url);\r\n    \r\n        if (!res.ok) {\r\n            throw new Error(`Could not fetch ${url}, status:  ${res.status}`);\r\n        }\r\n    \r\n        return await res.json();\r\n    };\r\n\r\n    getAllCharacters = async (offset = this._baseOffset) => {\r\n        const res = await this.getResourse(`${this._apiBase}characters?limit=9&offset=${offset}&${this._apiKey}`);\r\n        return res.data.results.map(this._transformCaracter);\r\n    }\r\n\r\n    getCharacter = async (id) => {\r\n        const res = await this.getResourse(`${this._apiBase}characters/${id}?${this._apiKey}`); // получаем персонажа\r\n        return this._transformCaracter(res.data.results[0]) // возвращаем результат персонажа\r\n    }\r\n\r\n    _transformCaracter = (char) => {\r\n        return {\r\n            id: char.id,\r\n            name: char.name,\r\n            description: char.description ? `${char.description.slice(0, 210)}...` : 'There is no description for this character',\r\n            thumbnail: char.thumbnail.path + '.' + char.thumbnail.extension,\r\n            homepage: char.urls[0].url,\r\n            wiki: char.urls[1].url,\r\n            comics: char.comics.items\r\n        }\r\n    }\r\n}\r\n\r\nexport default MarvelService;"],"mappings":"ibAAMA,cAAa,4GAMfC,QAAQ,CAAG,2CAA2C,MACtDC,OAAO,CAAG,yCAAyC,MACnDC,WAAW,CAAG,GAAG,MAGjBC,WAAW,4FAAG,iBAAOC,GAAG,kJACJC,MAAK,CAACD,GAAG,CAAC,QAAtBE,GAAG,kBAEFA,GAAG,CAACC,EAAE,8BACD,IAAIC,MAAK,2BAAoBJ,GAAG,uBAAcE,GAAG,CAACG,MAAM,EAAG,8BAGxDH,IAAG,CAACI,IAAI,EAAE,6GAC1B,oEAEDC,gBAAgB,wEAAG,0KAAOC,MAAM,kDAAG,KAAI,CAACV,WAAW,wBAC7B,MAAI,CAACC,WAAW,WAAI,KAAI,CAACH,QAAQ,sCAA6BY,MAAM,aAAI,KAAI,CAACX,OAAO,EAAG,QAAnGK,GAAG,iDACFA,GAAG,CAACO,IAAI,CAACC,OAAO,CAACC,GAAG,CAAC,KAAI,CAACC,kBAAkB,CAAC,0DACvD,QAEDC,YAAY,6FAAG,kBAAOC,EAAE,uJACF,MAAI,CAACf,WAAW,WAAI,KAAI,CAACH,QAAQ,uBAAckB,EAAE,aAAI,KAAI,CAACjB,OAAO,EAAG,QAAhFK,GAAG,iDACF,KAAI,CAACU,kBAAkB,CAACV,GAAG,CAACO,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC,0DACtD,sEAEDE,kBAAkB,CAAG,SAACG,IAAI,CAAK,CAC3B,MAAO,CACHD,EAAE,CAAEC,IAAI,CAACD,EAAE,CACXE,IAAI,CAAED,IAAI,CAACC,IAAI,CACfC,WAAW,CAAEF,IAAI,CAACE,WAAW,WAAMF,IAAI,CAACE,WAAW,CAACC,KAAK,CAAC,CAAC,CAAE,GAAG,CAAC,QAAQ,4CAA4C,CACrHC,SAAS,CAAEJ,IAAI,CAACI,SAAS,CAACC,IAAI,CAAG,GAAG,CAAGL,IAAI,CAACI,SAAS,CAACE,SAAS,CAC/DC,QAAQ,CAAEP,IAAI,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACvB,GAAG,CAC1BwB,IAAI,CAAET,IAAI,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACvB,GAAG,CACtByB,MAAM,CAAEV,IAAI,CAACU,MAAM,CAACC,KACxB,CAAC,CACL,CAAC,IAGL,cAAe/B,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}